<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tareas RPG - Organizador Medieval</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600&family=Crimson+Text:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <header class="header">
            <div class="player-info">
                <div class="avatar">
                    <img src="https://via.placeholder.com/80" alt="Avatar" id="playerAvatar">
                </div>
                <div class="stats">
                    <p class="player-label">Centro de control</p>
                    <h2 id="playerName">Aventurero</h2>
                    <div class="stat-bar">
                        <span>Nivel <span id="playerLevel">1</span></span>
                        <div class="exp-bar">
                            <div class="exp-fill" id="expFill"></div>
                        </div>
                        <span><span id="currentExp">0</span>/<span id="maxExp">100</span> EXP</span>
                    </div>
                    <div class="coins">
                        <span class="coin-icon">üí∞</span>
                        <span id="playerCoins">0</span> monedas
                    </div>
                </div>
            </div>
            <nav class="main-nav">
                <button class="nav-btn active" data-view="dashboard">Tablero</button>
                <button class="nav-btn" data-view="schedule">Horario</button>
                <button class="nav-btn" data-view="calendar">Calendario</button>
                <button class="nav-btn" data-view="inventory">Inventario</button>
                <button class="nav-btn" data-view="market">Mercado</button>
                <button class="nav-btn" data-view="loot">Cajas de Bot√≠n</button>
                <button class="nav-btn" id="settingsBtn" type="button">‚öôÔ∏è Ajustes</button>
            </nav>
        </header>

        <main class="main-content">
            <!-- Vista Dashboard -->
            <section id="dashboard" class="view active">
                <div class="dashboard-header">
                    <div>
                        <h1>Resumen Ejecutivo</h1>
                        <p class="dashboard-subtitle" id="dashboardDateLabel">Tu jornada est√° lista.</p>
                    </div>
                    <button class="btn-primary" id="addTaskBtn">+ Nueva Misi√≥n</button>
                </div>

                <div class="executive-summary">
                    <article class="summary-card mission-hook-card">
                        <span class="summary-title">Misi√≥n de apertura</span>
                        <strong id="missionHookText">Pulsa para iniciar tu jornada</strong>
                        <button class="btn-primary" id="startJourneyBtn" type="button">‚öîÔ∏è Empezar jornada</button>
                    </article>
                    <article class="summary-card highlight">
                        <span class="summary-title">Misiones de hoy</span>
                        <strong id="summaryTodayCount">0</strong>
                        <small id="summaryReadyCount">0 disponibles ahora</small>
                    </article>
                    <article class="summary-card">
                        <span class="summary-title">Pendientes</span>
                        <strong id="summaryPendingCount">0</strong>
                        <small id="summaryCompletedCount">0 completadas</small>
                    </article>
                    <article class="summary-card">
                        <span class="summary-title">Econom√≠a</span>
                        <strong id="summaryCoinsCount">0 monedas</strong>
                        <small id="summaryInventoryCount">0 objetos en inventario</small>
                    </article>
                    <article class="summary-card">
                        <span class="summary-title">Progreso</span>
                        <strong>Nivel <span id="summaryLevel">1</span></strong>
                        <small id="summaryExpPercent">0% hacia el siguiente nivel</small>
                    </article>
                    <article class="summary-card">
                        <span class="summary-title">Meta semanal</span>
                        <strong><span id="weeklyProgressCount">0</span>/<span id="weeklyGoalCount">18</span></strong>
                        <div class="weekly-progress-bar">
                            <div class="weekly-progress-fill" id="weeklyProgressFill"></div>
                        </div>
                        <small id="weeklyProgressLabel">Completa misiones para abrir el cofre semanal.</small>
                    </article>
                </div>

                <div class="habit-row">
                    <div class="habit-card">
                        <h3>Check-in diario</h3>
                        <p id="checkinStatus">Reclama tu bonus diario para mantener el h√°bito.</p>
                        <button class="btn-primary" id="dailyCheckinBtn" type="button">üéÅ Reclamar check-in</button>
                    </div>
                    <div class="habit-card">
                        <h3>Logros recientes</h3>
                        <ul id="recentAchievements" class="achievements-list">
                            <li>A√∫n no hay logros. Completa tu primera misi√≥n de hoy.</li>
                        </ul>
                    </div>
                </div>
                
                <div class="tasks-container">
                    <div class="tasks-section">
                        <h3>Misiones Pendientes</h3>
                        <div class="task-list" id="pendingTasks">
                            <!-- Las tareas se agregar√°n din√°micamente -->
                        </div>
                    </div>
                    
                    <div class="tasks-section">
                        <h3>Misiones Completadas</h3>
                        <div class="task-list" id="completedTasks">
                            <!-- Las tareas completadas se mostrar√°n aqu√≠ -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Vista Horario -->
            <section id="schedule" class="view">
                <h1>Horario Semanal</h1>
                <div class="week-schedule">
                    <div class="schedule-grid" id="scheduleGrid">
                        <!-- Se generar√° din√°micamente -->
                    </div>
                </div>
            </section>

            <!-- Vista Calendario -->
            <section id="calendar" class="view">
                <h1>Calendario de Aventuras</h1>
                <div class="calendar-container">
                    <div class="calendar-header">
                        <button id="prevMonth">&lt;</button>
                        <h2 id="currentMonth">Enero 2024</h2>
                        <button id="nextMonth">&gt;</button>
                    </div>
                    <div class="calendar-grid" id="calendarGrid">
                        <!-- Se generar√° din√°micamente -->
                    </div>
                </div>
            </section>

            <!-- Vista Inventario -->
            <section id="inventory" class="view">
                <h1>Inventario del H√©roe</h1>
                <div class="inventory-grid" id="inventoryGrid">
                    <!-- Los objetos se mostrar√°n aqu√≠ -->
                </div>
                <div class="character-stats">
                    <h3>Estad√≠sticas del Personaje</h3>
                    <div class="equipment-slots">
                        <div class="equipment-slot" data-slot="head">
                            <span>Cabeza</span>
                            <div class="slot-item"></div>
                        </div>
                        <div class="equipment-slot" data-slot="chest">
                            <span>Pecho</span>
                            <div class="slot-item"></div>
                        </div>
                        <div class="equipment-slot" data-slot="weapon">
                            <span>Arma</span>
                            <div class="slot-item"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Vista Mercado -->
            <section id="market" class="view">
                <h1>Mercado Medieval</h1>
                <div class="market-tabs">
                    <button class="tab-btn active" data-tab="buy">Comprar</button>
                    <button class="tab-btn" data-tab="sell">Vender</button>
                </div>
                <div class="market-content">
                    <div class="market-grid" id="marketGrid">
                        <!-- Los objetos del mercado se mostrar√°n aqu√≠ -->
                    </div>
                </div>
            </section>

            <!-- Vista Cajas de Bot√≠n -->
            <section id="loot" class="view">
                <h1>Cajas de Bot√≠n M√°gicas</h1>
                <div class="loot-boxes">
                    <div class="loot-box" data-rarity="common">
                        <div class="box-icon">üì¶</div>
                        <h3>Caja Com√∫n</h3>
                        <p>Objetos b√°sicos</p>
                        <div class="price">üí∞ 50</div>
                        <button class="btn-buy" data-price="50" data-rarity="common">Abrir</button>
                    </div>
                    <div class="loot-box" data-rarity="rare">
                        <div class="box-icon">üéÅ</div>
                        <h3>Caja Rara</h3>
                        <p>Objetos valiosos</p>
                        <div class="price">üí∞ 150</div>
                        <button class="btn-buy" data-price="150" data-rarity="rare">Abrir</button>
                    </div>
                    <div class="loot-box" data-rarity="epic">
                        <div class="box-icon">üèÜ</div>
                        <h3>Caja √âpica</h3>
                        <p>Objetos legendarios</p>
                        <div class="price">üí∞ 300</div>
                        <button class="btn-buy" data-price="300" data-rarity="epic">Abrir</button>
                    </div>
                </div>

                <div class="loot-machine" id="lootMachine">
                    <h3>üé∞ M√°quina Arcana</h3>
                    <p class="loot-machine-subtitle">Gira la ruleta y observa los posibles premios antes del resultado final.</p>
                    <div class="loot-reel-window">
                        <div class="loot-reel-track" id="lootReelTrack"></div>
                        <div class="loot-pointer"></div>
                    </div>
                    <div class="loot-result" id="lootResult">Elige una caja para comenzar.</div>
                    <div class="loot-particles" id="lootParticles" aria-hidden="true"></div>
                </div>
            </section>
        </main>

        <!-- Modal para agregar/editar tareas -->
        <div id="taskModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2 id="modalTitle">Nueva Misi√≥n</h2>
                <form id="taskForm">
                    <div class="form-group">
                        <label for="taskTitle">T√≠tulo de la Misi√≥n:</label>
                        <input type="text" id="taskTitle" required>
                    </div>
                    <div class="form-group">
                        <label for="taskDescription">Descripci√≥n:</label>
                        <textarea id="taskDescription"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="taskPriority">Prioridad:</label>
                        <select id="taskPriority">
                            <option value="low">Baja (Verde)</option>
                            <option value="medium">Media (Amarillo)</option>
                            <option value="high">Alta (Roja)</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Recompensas (Calculadas autom√°ticamente):</label>
                        <div class="rewards-preview">
                            <div class="reward-info">
                                <span>‚≠ê Experiencia: </span>
                                <span id="autoExp">10</span>
                            </div>
                            <div class="reward-info">
                                <span>üí∞ Monedas: </span>
                                <span id="autoCoins">5</span>
                            </div>
                        </div>
                        <div class="discipline-info">
                            <small>üí° Las recompensas aumentan con tu disciplina (rachas de cumplimiento)</small>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="taskRepeat">Repetir:</label>
                        <select id="taskRepeat">
                            <option value="none">No repetir</option>
                            <option value="daily">Diario</option>
                            <option value="weekly">Semanal</option>
                            <option value="monthly">Mensual</option>
                        </select>
                    </div>
                    <div class="form-group" id="dateGroup">
                        <label for="taskDate">Fecha:</label>
                        <input type="date" id="taskDate">
                    </div>
                    <div class="form-group" id="dayOfWeekGroup" style="display: none;">
                        <label for="taskDayOfWeek">D√≠a de la semana:</label>
                        <select id="taskDayOfWeek">
                            <option value="1">Lunes</option>
                            <option value="2">Martes</option>
                            <option value="3">Mi√©rcoles</option>
                            <option value="4">Jueves</option>
                            <option value="5">Viernes</option>
                            <option value="6">S√°bado</option>
                            <option value="0">Domingo</option>
                        </select>
                    </div>
                    <div class="form-group" id="timeGroup">
                        <label for="taskTime">Hora:</label>
                        <input type="time" id="taskTime">
                    </div>
                    <button type="submit" class="btn-primary">Guardar Misi√≥n</button>
                </form>
            </div>
        </div>

        <!-- Modal para mostrar recompensas -->
        <div id="rewardModal" class="modal">
            <div class="modal-content reward-modal">
                <span class="close">&times;</span>
                <h2>¬°Misi√≥n Completada!</h2>
                <div class="reward-display">
                    <div class="reward-item">
                        <span class="reward-icon">‚≠ê</span>
                        <span class="reward-text">+<span id="rewardExp">10</span> EXP</span>
                    </div>
                    <div class="reward-item">
                        <span class="reward-icon">üí∞</span>
                        <span class="reward-text">+<span id="rewardCoins">5</span> monedas</span>
                    </div>
                </div>
                <button class="btn-primary" id="claimReward">Reclamar Recompensa</button>
            </div>
        </div>

        <div id="settingsModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2>Ajustes de experiencia</h2>
                <div class="settings-options">
                    <label class="settings-toggle">
                        <input type="checkbox" id="reducedMotionToggle">
                        <span>Reducir animaciones intensas</span>
                    </label>
                    <small>Ideal para una experiencia m√°s ligera sin perder funcionalidad.</small>
                </div>
            </div>
        </div>

        <div id="toast" class="toast" role="status" aria-live="polite"></div>
        <div id="undoDeleteToast" class="undo-toast" role="status" aria-live="polite">
            <span>Misi√≥n eliminada.</span>
            <button id="undoDeleteBtn" type="button">Deshacer</button>
        </div>
        <div id="levelUpFx" class="level-up-fx" aria-hidden="true">
            <div class="level-up-content">
                <h2>¬°Subiste de nivel!</h2>
                <p id="levelUpText">Ahora eres nivel 2</p>
            </div>
        </div>

        <!-- Modal de confirmaci√≥n personalizado -->
        <div id="confirmModal" class="modal">
            <div class="modal-content confirm-modal">
                <span class="close" onclick="game.closeConfirmModal()">&times;</span>
                <h2 id="confirmTitle">Confirmar Acci√≥n</h2>
                <p id="confirmMessage">¬øEst√°s seguro de que quieres realizar esta acci√≥n?</p>
                <div class="confirm-actions">
                    <button class="btn-secondary" onclick="game.closeConfirmModal()">Cancelar</button>
                    <button class="btn-primary" id="confirmBtn">Confirmar</button>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
